@startuml
title UC-05 Learn Course / View Lesson (Sequence)
participant User
participant WebApp
participant ContentService
participant EnrollmentService
participant DB
participant Analytics

User -> WebApp: Open lesson
WebApp -> EnrollmentService: verifyAccess(userId, courseId)
EnrollmentService -> DB: SELECT enrollment
DB --> EnrollmentService: ok/not enrolled
alt allowed
WebApp -> ContentService: getLesson(lessonId)
ContentService -> DB: SELECT lesson content
DB --> ContentService: lesson data
ContentService --> WebApp: lesson payload (video/url)
WebApp --> User: render player
loop during viewing
WebApp -> Analytics: trackProgress(userId, lessonId, timestamp)
Analytics --> DB: store event
end
else denied
WebApp --> User: access denied / CTA to enroll
end
@enduml
