@startuml
title UC-15 Rate & Review Course (Sequence)
participant User
participant WebApp
participant ReviewService
participant EnrollmentService
participant DB
participant CourseService

User -> WebApp: open review form -> submit rating + comment
WebApp -> EnrollmentService: verifyEligibleToReview(userId, courseId)
EnrollmentService -> DB: SELECT enrollment/completion
DB --> EnrollmentService: eligibility
alt eligible
WebApp -> ReviewService: createReview(userId, courseId, rating, comment)
ReviewService -> DB: INSERT review
DB --> ReviewService: ok
ReviewService -> CourseService: recalcRating(courseId)
CourseService -> DB: UPDATE course.rating
CourseService --> WebApp: ack
WebApp --> User: show thank you
else not eligible
WebApp --> User: show "not eligible" error
end
@enduml
